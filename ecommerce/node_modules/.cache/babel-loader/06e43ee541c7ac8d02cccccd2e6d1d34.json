{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Harshit Saxena/Documents/GitHub/Ecommerce-App/ecommerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Harshit Saxena/Documents/GitHub/Ecommerce-App/ecommerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Harshit Saxena/Documents/GitHub/Ecommerce-App/ecommerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import react,{useEffect,useState}from\"react\";import axios from\"axios\";import toast,{Toaster}from'react-hot-toast';import{useApp}from\"../context/App-context\";import SignUp from\"./Signup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginComponent(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userName=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setpassword=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),userCredentials=_useState6[0],setUserCredentials=_useState6[1];var _useApp=useApp(),dispatch=_useApp.dispatch;var loginHandler=function loginHandler(event){event.preventDefault();setUserCredentials(userName,password);serverLogin();};function serverLogin(){return _serverLogin.apply(this,arguments);}function _serverLogin(){_serverLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios({method:'post',url:'http://localhost:3000/users',data:{\"username\":userName,\"password\":password}}).then(function(response){console.log(response.data);toast.success(\"succesfully logged in\");dispatch({type:\"LOGGEDINUSER\",payload:userName});}).catch(function(error){console.log(error.response);toast.error(\"Invalid Username or Password\");});case 2:case\"end\":return _context.stop();}}},_callee);}));return _serverLogin.apply(this,arguments);}console.log(userCredentials);return/*#__PURE__*/_jsx(\"div\",{className:\"login-div\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"\",onSubmit:loginHandler,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setUsername(function(){return e.target.value;});},type:\"text\",className:\"input-primary\",placeholder:\"Username \"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setpassword(function(){return e.target.value;});},type:\"password\",className:\"input-primary\",placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login Cta-Cart\",children:\"Log in\"})]})});}","map":{"version":3,"sources":["C:/Users/Harshit Saxena/Documents/GitHub/Ecommerce-App/ecommerce/src/Components/Login.js"],"names":["react","useEffect","useState","axios","toast","Toaster","useApp","SignUp","LoginComponent","userName","setUsername","password","setpassword","userCredentials","setUserCredentials","dispatch","loginHandler","event","preventDefault","serverLogin","method","url","data","then","response","console","log","success","type","payload","catch","error","e","target","value"],"mappings":"kiBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,OAAhB,KAA+B,iBAA/B,CACA,OAASC,MAAT,KAAuB,wBAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,wFAGA,cAAe,SAASC,CAAAA,cAAT,EAA0B,eACRN,QAAQ,CAAC,EAAD,CADA,wCAC9BO,QAD8B,eACrBC,WADqB,8BAERR,QAAQ,CAAC,EAAD,CAFA,yCAE9BS,QAF8B,eAErBC,WAFqB,8BAGMV,QAAQ,CAAC,EAAD,CAHd,yCAG9BW,eAH8B,eAGdC,kBAHc,2BAIpBR,MAAM,EAJc,CAI9BS,QAJ8B,SAI9BA,QAJ8B,CAKrC,GAAMC,CAAAA,YAAY,CAAC,QAAbA,CAAAA,YAAa,CAACC,KAAD,CAAS,CAC1BA,KAAK,CAACC,cAAN,GACAJ,kBAAkB,CAACL,QAAD,CAAUE,QAAV,CAAlB,CACAQ,WAAW,GACZ,CAJD,CALqC,QAWxBA,CAAAA,WAXwB,2IAWvC,yJACQhB,CAAAA,KAAK,CAAC,CACViB,MAAM,CAAE,MADE,CAEVC,GAAG,CAAE,6BAFK,CAGVC,IAAI,CAAE,CACN,WAAWb,QADL,CACc,WAAWE,QADzB,CAHI,CAAD,CAAL,CAOLY,IAPK,CAOA,SAAUC,QAAV,CAAoB,CACxBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACF,IAArB,EACAlB,KAAK,CAACuB,OAAN,CAAc,uBAAd,EACAZ,QAAQ,CAAC,CAACa,IAAI,CAAC,cAAN,CAAqBC,OAAO,CAACpB,QAA7B,CAAD,CAAR,CACD,CAXK,EAYLqB,KAZK,CAYC,SAAUC,KAAV,CAAiB,CACpBN,OAAO,CAACC,GAAR,CAAYK,KAAK,CAACP,QAAlB,EACDpB,KAAK,CAAC2B,KAAN,CAAY,8BAAZ,EACF,CAfK,CADR,uDAXuC,8CA8BrCN,OAAO,CAACC,GAAR,CAAYb,eAAZ,EACA,mBACE,YAAK,SAAS,CAAC,WAAf,uBACE,cAAM,SAAS,CAAC,EAAhB,CAAmB,QAAQ,CAAEG,YAA7B,wBACI,6BADJ,cAEE,cACC,QAAQ,CAAE,kBAACgB,CAAD,QAAKtB,CAAAA,WAAW,CAAC,iBAAIsB,CAAAA,CAAC,CAACC,MAAF,CAASC,KAAb,EAAD,CAAhB,EADX,CAEE,IAAI,CAAC,MAFP,CAGE,SAAS,CAAC,eAHZ,CAIE,WAAW,CAAC,WAJd,EAFF,cAQE,cACE,QAAQ,CAAE,kBAACF,CAAD,QAAKpB,CAAAA,WAAW,CAAC,iBAAIoB,CAAAA,CAAC,CAACC,MAAF,CAASC,KAAb,EAAD,CAAhB,EADZ,CAEE,IAAI,CAAC,UAFP,CAGE,SAAS,CAAC,eAHZ,CAIE,WAAW,CAAC,UAJd,EARF,cAcA,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,gBAAhC,oBAdA,GADF,EADF,CAuBH","sourcesContent":["import react, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\"\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport { useApp } from \"../context/App-context\";\r\nimport SignUp from \"./Signup\";\r\n\r\n\r\nexport default function LoginComponent() {\r\n    const [userName,setUsername]=useState(\"\")\r\n    const [password,setpassword]=useState(\"\")\r\n    const [userCredentials,setUserCredentials]=useState([])\r\n    const {dispatch}=useApp()\r\n    const loginHandler=(event)=>{\r\n      event.preventDefault()\r\n      setUserCredentials(userName,password)\r\n      serverLogin()\r\n    }\r\n    \r\n  async function serverLogin(){\r\n    await axios({\r\n      method: 'post',\r\n      url: 'http://localhost:3000/users',\r\n      data: {\r\n      \"username\":userName,\"password\":password\r\n      }\r\n    })\r\n    .then(function (response) {\r\n      console.log(response.data)\r\n      toast.success(\"succesfully logged in\")\r\n      dispatch({type:\"LOGGEDINUSER\",payload:userName})\r\n    })\r\n    .catch(function (error) {\r\n        console.log(error.response)\r\n       toast.error(\"Invalid Username or Password\")\r\n    })\r\n  }\r\n  \r\n    console.log(userCredentials)\r\n    return (\r\n      <div className=\"login-div\">\r\n        <form className=\"\" onSubmit={loginHandler} >\r\n            <h1>Login</h1>\r\n          <input\r\n           onChange={(e)=>setUsername(()=>e.target.value)}\r\n            type=\"text\"\r\n            className=\"input-primary\"\r\n            placeholder=\"Username \"\r\n          />\r\n          <input\r\n            onChange={(e)=>setpassword(()=>e.target.value)}\r\n            type=\"password\"\r\n            className=\"input-primary\"\r\n            placeholder=\"Password\"\r\n          />\r\n        <button type=\"submit\" className=\"login Cta-Cart\" >Log in</button>\r\n       \r\n      \r\n\r\n        </form>\r\n      </div>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}