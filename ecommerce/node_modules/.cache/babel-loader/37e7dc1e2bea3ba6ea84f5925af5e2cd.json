{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Harshit Saxena/Documents/GitHub/Ecommerce-App/ecommerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Harshit Saxena/Documents/GitHub/Ecommerce-App/ecommerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Harshit Saxena/Documents/GitHub/Ecommerce-App/ecommerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import react,{useEffect,useState}from\"react\";import CartCard from\"../Components/CartCard\";import PriceCalculator from\"../Components/PriceCalculator\";import{useApp}from\"../context/App-context\";import toast,{Toaster}from\"react-hot-toast\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Cart(){var _useApp=useApp(),state=_useApp.state,dispatch=_useApp.dispatch;var userName=state.userName;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cart=_useState2[0],setCart=_useState2[1];function cartLoadHandler(){return _cartLoadHandler.apply(this,arguments);}function _cartLoadHandler(){_cartLoadHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios({method:\"get\",url:\"http://localhost:3000/cart/\".concat(userName),data:{}}).then(function(response){console.log(response.data);toast.success(\"cart loaded succesfully\");var cart=response.data.cart;console.log(cart.itemsInCart);setCart(function(){return cart.itemsInCart;});}).catch(function(error){console.log(error.response);toast.error(\"Invalid Username or Password\");});case 2:case\"end\":return _context.stop();}}},_callee);}));return _cartLoadHandler.apply(this,arguments);}useEffect(cartLoadHandler,[]);var cartItems=cart;return/*#__PURE__*/_jsx(\"div\",{className:\"cart-body\",children:userName==null?/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Please Login or Sign up first\"})}):cartItems.length==0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-cart\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Please add Some products in your cart\"})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Cart Summary \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-summary-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-card-wrap\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(CartCard,{item:item});})}),/*#__PURE__*/_jsx(PriceCalculator,{cartItems:cartItems})]})]})});}","map":{"version":3,"sources":["C:/Users/Harshit Saxena/Documents/GitHub/Ecommerce-App/ecommerce/src/Pages/Cart.js"],"names":["react","useEffect","useState","CartCard","PriceCalculator","useApp","toast","Toaster","axios","Cart","state","dispatch","userName","cart","setCart","cartLoadHandler","method","url","data","then","response","console","log","success","itemsInCart","catch","error","cartItems","length","map","item"],"mappings":"kiBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CACA,MAAOC,CAAAA,eAAP,KAA4B,+BAA5B,CACA,OAASC,MAAT,KAAuB,wBAAvB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,OAAhB,KAA+B,iBAA/B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFACA,cAAe,SAASC,CAAAA,IAAT,EAAgB,aACDJ,MAAM,EADL,CACrBK,KADqB,SACrBA,KADqB,CACdC,QADc,SACdA,QADc,CAE7B,GAAMC,CAAAA,QAAQ,CAAGF,KAAK,CAACE,QAAvB,CAF6B,cAILV,QAAQ,CAAC,EAAD,CAJH,wCAItBW,IAJsB,eAIhBC,OAJgB,uBAKdC,CAAAA,eALc,uJAK7B,yJACQP,CAAAA,KAAK,CAAC,CACVQ,MAAM,CAAE,KADE,CAEVC,GAAG,sCAAgCL,QAAhC,CAFO,CAGVM,IAAI,CAAE,EAHI,CAAD,CAAL,CAKHC,IALG,CAKE,SAAUC,QAAV,CAAoB,CACxBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACF,IAArB,EACAZ,KAAK,CAACiB,OAAN,CAAc,yBAAd,EAFwB,GAGhBV,CAAAA,IAHgB,CAGPO,QAAQ,CAACF,IAHF,CAGhBL,IAHgB,CAIxBQ,OAAO,CAACC,GAAR,CAAYT,IAAI,CAACW,WAAjB,EACAV,OAAO,CAAC,iBAAMD,CAAAA,IAAI,CAACW,WAAX,EAAD,CAAP,CACD,CAXG,EAYHC,KAZG,CAYG,SAAUC,KAAV,CAAiB,CACtBL,OAAO,CAACC,GAAR,CAAYI,KAAK,CAACN,QAAlB,EACAd,KAAK,CAACoB,KAAN,CAAY,8BAAZ,EACD,CAfG,CADR,uDAL6B,kDAuB7BzB,SAAS,CAACc,eAAD,CAAkB,EAAlB,CAAT,CACA,GAAMY,CAAAA,SAAS,CAAGd,IAAlB,CAEA,mBACE,YAAK,SAAS,CAAC,WAAf,UACGD,QAAQ,EAAI,IAAZ,cACC,YAAK,SAAS,CAAC,EAAf,uBACE,WAAI,SAAS,CAAC,aAAd,2CADF,EADD,CAKGe,SAAS,CAACC,MAAV,EAAoB,CAApB,cACF,YAAK,SAAS,CAAC,YAAf,uBACE,6DADF,EADE,cAMF,oCACE,WAAI,SAAS,CAAC,aAAd,2BADF,cAEE,aAAK,SAAS,CAAC,mBAAf,wBACE,YAAK,SAAS,CAAC,gBAAf,UACGD,SAAS,CAACE,GAAV,CAAc,SAACC,IAAD,qBACb,KAAC,QAAD,EAAU,IAAI,CAAEA,IAAhB,EADa,EAAd,CADH,EADF,cAME,KAAC,eAAD,EAAiB,SAAS,CAAEH,SAA5B,EANF,GAFF,GAZJ,EADF,CA2BD","sourcesContent":["import react, { useEffect, useState } from \"react\";\r\nimport CartCard from \"../Components/CartCard\";\r\nimport PriceCalculator from \"../Components/PriceCalculator\";\r\nimport { useApp } from \"../context/App-context\";\r\nimport toast, { Toaster } from \"react-hot-toast\";\r\nimport axios from \"axios\";\r\nexport default function Cart() {\r\n  const { state, dispatch } = useApp();\r\n  const userName = state.userName;\r\n\r\n  const [cart, setCart] = useState([]);\r\n  async function cartLoadHandler() {\r\n    await axios({\r\n      method: \"get\",\r\n      url: `http://localhost:3000/cart/${userName}`,\r\n      data: {}\r\n    })\r\n      .then(function (response) {\r\n        console.log(response.data);\r\n        toast.success(\"cart loaded succesfully\");\r\n        const { cart } = response.data;\r\n        console.log(cart.itemsInCart);\r\n        setCart(() => cart.itemsInCart);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error.response);\r\n        toast.error(\"Invalid Username or Password\");\r\n      });\r\n  }\r\n  useEffect(cartLoadHandler, []);\r\n  const cartItems = cart;\r\n\r\n  return (\r\n    <div className=\"cart-body\">\r\n      {userName == null ? (\r\n        <div className=\"\">\r\n          <h1 className=\"text-center\">Please Login or Sign up first</h1>\r\n          {/* <img styel={{align:\"center\"}}src=\"https://ik.imagekit.io/harshit/mirage-logged-out_1_2F-BRhUof6.png\"/> */}\r\n        </div>\r\n      ) : cartItems.length == 0 ? (\r\n        <div className=\"empty-cart\">\r\n          <h1>Please add Some products in your cart\r\n          </h1>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <h1 className=\"text-center\">Cart Summary </h1>\r\n          <div className=\"cart-summary-wrap\">\r\n            <div className=\"cart-card-wrap\">\r\n              {cartItems.map((item) => (\r\n                <CartCard item={item} />\r\n              ))}\r\n            </div>\r\n            <PriceCalculator cartItems={cartItems} />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}